/*! mycctv 2016-09-22 */
function bind(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent(b,c)}function addClass(a,b){if(!a.className)return void(a.className=b);for(var c=a.className.split(" "),d=0;d<c.length;d++)if(c[d]==b)return;a.className+=" "+b}function removeClass(a,b){if(a.className)for(var c=a.className.split(" "),d=0;d<c.length;d++)if(c[d]==b)return c.splice(d,1),void(a.className=c.join(" "))}function getByClass(a,b){for(var c=a.getElementsByTagName("*"),d=[],e=0;e<c.length;e++){aClass=c[e].className.split(" ");for(var f=0;f<aClass.length;f++)aClass[f]==b&&d.push(c[e])}return d}function fnInfo(a,b){a.innerHTML=b,a.style.opacity=1,a.style.WebkitTransform="scale(1)",setTimeout(function(){a.style.WebkitTransform="scale(0)"},1e3)}function fnLoad(){function a(){removeClass(oWelcome,"pageShow"),fnIndex()}bind(oWelcome,"transitionend",a),setTimeout(function(){oWelcome.style.opacity=0},5e3)}function fnIndex(){function a(){r.innerHTML=t[u].alt;for(var a=0;a<t.length;a++)removeClass(s[a],"active");addClass(s[u],"active"),w=-u*v,q.style.transition="0.5s",q.style.WebkitTransform=q.style.transform="translateX("+w+"px)"}function b(a){clearInterval(i),a=a||window.event,x=a.changedTouches[0].pageX,iX2=w,q.style.transition="none",console.log(x)}function c(a){a=a||window.event,y=a.changedTouches[0].pageX,j=y-x,console.log(y),w=iX2+j,console.log(w),w<-(t.length-1)*v?w=-(t.length-1)*v:w>0&&(w=0),q.style.transform="translateX("+w+"px)"}function d(b){u=-Math.round(w/v),u>t.length-1?u=t.length-1:u<0&&(u=0),a(),e()}function e(){i=setInterval(function(){u++,u==t.length&&(u=0),a()},2e3)}function f(a){for(var b=a.getElementsByTagName("span"),c=0;c<b.length;c++)b[c].index=c;bind(a,"touchend",function(c){if(void 0!==c.target.index){for(var d=a.getElementsByTagName("input")[0],e=0;e<b.length;e++)removeClass(b[e],"active");for(e=0;e<=c.target.index;e++)addClass(b[e],"active"),d.value=c.target.index+1}return!1})}function g(){for(var a=0;a<m.length;a++){var b=m[a].getElementsByTagName("input")[0].value;if(0===b)return!1}return!0}function h(){for(var a=0;a<o.length;a++){var b=o[a].getElementsByTagName("input")[0].on;if(b)return!0}return!1}var i,j,k=document.getElementById("indexBtn"),l=document.getElementById("score"),m=getByClass(l,"stars"),n=document.getElementById("indexTags"),o=indexTags.getElementsByTagName("label"),p=getByClass(oIndex,"hint")[0],q=getByClass(oIndex,"pic-list")[0].getElementsByTagName("ul")[0],r=getByClass(oIndex,"info")[0],s=oIndex.getElementsByTagName("nav")[0].getElementsByTagName("a"),t=oIndex.getElementsByTagName("img"),u=1,v=document.documentElement.clientWidth,w=0,x=0,y=0;addClass(oIndex,"pageShow"),e(),bind(q,"touchstart",b),bind(q,"touchend",d),bind(q,"touchmove",c);for(var z=0;z<m.length;z++)f(m[z]);bind(n,"touchend",function(a){return"SPAN"==a.target.tagName?a.target.previousElementSibling.checked?(removeClass(a.target.parentNode,"active"),a.target.previousElementSibling.on=!1):(addClass(a.target.parentNode,"active"),a.target.previousElementSibling.on=!0):"LABEL"==a.target.tagName&&(a.target.children[0].checked?(removeClass(a.target,"active"),a.target.children[0].on=!1):(addClass(a.target,"active"),a.target.children[0].on=!0)),!1}),bind(k,"touchend",function(){var a=g(),b=h();a&&b?fnIndexOut():a?fnInfo(p,"给景区添加标签^_^"):fnInfo(p,"给景区评分^_^")})}function fnIndexOut(){addClass(oNews,"pageShow"),addClass(oMask,"pageShow"),fnNews(),oIndex.style.WebkitFilter="blur(5px)",oIndex.style.filter="blur(5px)",oNews.style.transition="0.5s",setTimeout(function(){oMask.style.opacity=1},14),setTimeout(function(){removeClass(oIndex,"pageShow"),oIndex.style.WebkitFilter=oIndex.style.filter="blur(0px)",oNews.style.opacity=1,removeClass(oMask,"pageShow")},3e3)}function fnNews(){var a=oNews.getElementsByTagName("input"),b=getByClass(oNews,"hint")[0];a[0].onchange=function(){"video"==this.files[0].type.split("/")[0]?fnNewsOut():fnInfo(b,"请上传视频")},a[1].onchange=function(){"image"==this.files[0].type.split("/")[0]?fnNewsOut():fnInfo(b,"请上传图片")}}function fnNewsOut(){oNews.style.cssText="",addClass(oVideoInfo,"pageShow"),removeClass(oNews,"pageShow"),fnVideoInfo()}function fnVideoInfo(){function a(){for(var a=0;a<b.length;a++){var c=b[a].getElementsByTagName("input")[0].on;if(c)return!0}return!1}var b=oVideoInfo.getElementsByTagName("label"),c=document.getElementById("infoBtn"),d=(getByClass(oVideoInfo,"hint")[0],document.getElementById("infoLabels"));bind(d,"touchend",function(b){return console.log(b.target.tagName),"SPAN"==b.target.tagName?b.target.previousElementSibling.checked?(removeClass(b.target.parentNode,"active"),b.target.previousElementSibling.on=!1):(addClass(b.target.parentNode,"active"),b.target.previousElementSibling.on=!0):"LABEL"==b.target.tagName&&(b.target.children[0].checked?(removeClass(b.target,"active"),b.target.children[0].on=!1):(addClass(b.target,"active"),b.target.children[0].on=!0)),a()?addClass(c,"submit"):removeClass(c,"submit"),!1}),bind(c,"touchend",function(){fnOver()})}function fnOver(){var a=oOver.getElementsByTagName("input")[0];removeClass(oVideoInfo,"pageShow"),addClass(oOver,"pageShow"),bind(a,"touchend",function(){removeClass(oOver,"pageShow"),addClass(oIndex,"pageShow")})}var oIndex=document.getElementById("index"),oWelcome=document.getElementById("welcome"),oMask=document.getElementById("mask"),oNews=document.getElementById("news"),oVideoInfo=document.getElementById("videoInfo"),oOver=document.getElementById("over");